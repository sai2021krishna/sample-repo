{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red14\green110\blue109;\red236\green241\blue247;\red0\green0\blue0;
\red9\green60\blue148;\red77\green80\blue85;\red107\green0\blue1;}
{\*\expandedcolortbl;;\cssrgb\c0\c50196\c50196;\cssrgb\c94118\c95686\c97647;\cssrgb\c0\c0\c0;
\cssrgb\c1569\c31765\c64706;\cssrgb\c37255\c38824\c40784;\cssrgb\c50196\c0\c0;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 AWSTemplateFormatVersion\cf0 \strokec4 : \cf5 \strokec5 '2010-09-09'\cf0 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 Description\cf0 \strokec4 : >\cb1 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3 \strokec5   This CloudFormation template creates the necessary IAM roles for the KYC\cf0 \cb1 \strokec4 \
\cf5 \cb3 \strokec5   services based on the provided architecture design.\cf0 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 Parameters\cf0 \strokec4 :\cb1 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3   \cf2 \strokec2 S3BucketName\cf0 \strokec4 :\cb1 \
\cb3     \cf2 \strokec2 Type\cf0 \strokec4 : \cf5 \strokec5 String\cf0 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 Description\cf0 \strokec4 : \cf5 \strokec5 The name of the S3 bucket that triggers the event producer Lambda.\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 TtEventTopicName\cf0 \strokec4 :\cb1 \
\cb3     \cf2 \strokec2 Type\cf0 \strokec4 : \cf5 \strokec5 String\cf0 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 Description\cf0 \strokec4 : \cf5 \strokec5 The name of the TT Event Topic (SNS) to which the producer Lambda publishes.\cf0 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 Metadata\cf0 \strokec4 : \{\}\cb1 \
\
\cf2 \cb3 \strokec2 Resources\cf0 \strokec4 :\cb1 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3   \cf6 \strokec6 # IAM Role for the bdp-event-producer Lambda function\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 BdpEventProducerRole\cf0 \strokec4 :\cb1 \
\cb3     \cf2 \strokec2 Type\cf0 \strokec4 : \cf5 \strokec5 'AWS::IAM::Role'\cf0 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 Properties\cf0 \strokec4 :\cb1 \
\cb3       \cf2 \strokec2 RoleName\cf0 \strokec4 : \cf5 \strokec5 'bbkyc-bdp-event-producer-role'\cf0 \cb1 \strokec4 \
\cb3       \cf2 \strokec2 AssumeRolePolicyDocument\cf0 \strokec4 :\cb1 \
\cb3         \cf2 \strokec2 Version\cf0 \strokec4 : \cf5 \strokec5 '2012-10-17'\cf0 \cb1 \strokec4 \
\cb3         \cf2 \strokec2 Statement\cf0 \strokec4 :\cb1 \
\cb3           - \cf2 \strokec2 Effect\cf0 \strokec4 : \cf5 \strokec5 Allow\cf0 \cb1 \strokec4 \
\cb3             \cf2 \strokec2 Principal\cf0 \strokec4 :\cb1 \
\cb3               \cf2 \strokec2 Service\cf0 \strokec4 :\cb1 \
\cb3                 - \cf5 \strokec5 lambda.amazonaws.com\cf0 \cb1 \strokec4 \
\cb3             \cf2 \strokec2 Action\cf0 \strokec4 :\cb1 \
\cb3               - \cf5 \strokec5 'sts:AssumeRole'\cf0 \cb1 \strokec4 \
\cb3       \cf2 \strokec2 Policies\cf0 \strokec4 :\cb1 \
\cb3         - \cf2 \strokec2 PolicyName\cf0 \strokec4 : \cf5 \strokec5 'bbkyc-bdp-event-producer-policy'\cf0 \cb1 \strokec4 \
\cb3           \cf2 \strokec2 PolicyDocument\cf0 \strokec4 :\cb1 \
\cb3             \cf2 \strokec2 Version\cf0 \strokec4 : \cf5 \strokec5 '2012-10-17'\cf0 \cb1 \strokec4 \
\cb3             \cf2 \strokec2 Statement\cf0 \strokec4 :\cb1 \
\cb3               \cf6 \strokec6 # Basic Lambda execution permissions for logging\cf0 \cb1 \strokec4 \
\cb3               - \cf2 \strokec2 Effect\cf0 \strokec4 : \cf5 \strokec5 Allow\cf0 \cb1 \strokec4 \
\cb3                 \cf2 \strokec2 Action\cf0 \strokec4 :\cb1 \
\cb3                   - \cf5 \strokec5 'logs:CreateLogGroup'\cf0 \cb1 \strokec4 \
\cb3                   - \cf5 \strokec5 'logs:CreateLogStream'\cf0 \cb1 \strokec4 \
\cb3                   - \cf5 \strokec5 'logs:PutLogEvents'\cf0 \cb1 \strokec4 \
\cb3                 \cf2 \strokec2 Resource\cf0 \strokec4 : \cf5 \strokec5 'arn:aws:logs:*:*:*'\cf0 \cb1 \strokec4 \
\cb3               \cf6 \strokec6 # Permission to read objects from the source S3 bucket\cf0 \cb1 \strokec4 \
\cb3               - \cf2 \strokec2 Effect\cf0 \strokec4 : \cf5 \strokec5 Allow\cf0 \cb1 \strokec4 \
\cb3                 \cf2 \strokec2 Action\cf0 \strokec4 :\cb1 \
\cb3                   - \cf5 \strokec5 's3:GetObject'\cf0 \cb1 \strokec4 \
\cb3                 \cf2 \strokec2 Resource\cf0 \strokec4 : \cf7 \strokec7 !Sub\cf0 \strokec4  \cf5 \strokec5 'arn:aws:s3:::$\{S3BucketName\}/*'\cf0 \cb1 \strokec4 \
\cb3               \cf6 \strokec6 # Permission to publish messages to the SNS topic\cf0 \cb1 \strokec4 \
\cb3               - \cf2 \strokec2 Effect\cf0 \strokec4 : \cf5 \strokec5 Allow\cf0 \cb1 \strokec4 \
\cb3                 \cf2 \strokec2 Action\cf0 \strokec4 :\cb1 \
\cb3                   - \cf5 \strokec5 'sns:Publish'\cf0 \cb1 \strokec4 \
\cb3                 \cf2 \strokec2 Resource\cf0 \strokec4 : \cf7 \strokec7 !Sub\cf0 \strokec4  \cf5 \strokec5 'arn:aws:sns:$\{AWS::Region\}:$\{AWS::AccountId\}:$\{TtEventTopicName\}'\cf0 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 Outputs\cf0 \strokec4 :\cb1 \
\pard\pardeftab720\partightenfactor0
\cf0 \cb3   \cf2 \strokec2 BdpEventProducerRoleArn\cf0 \strokec4 :\cb1 \
\cb3     \cf2 \strokec2 Description\cf0 \strokec4 : \cf5 \strokec5 "ARN of the IAM role for the bdp-event-producer Lambda"\cf0 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 Value\cf0 \strokec4 : \cf7 \strokec7 !GetAtt\cf0 \strokec4  \cf5 \strokec5 BdpEventProducerRole.Arn\cf0 \cb1 \strokec4 \
}